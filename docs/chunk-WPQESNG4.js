import{B as v,x as p,z as k}from"./chunk-AMFU7SSY.js";import{J as m,M as o,ba as a,jb as s,kb as l}from"./chunk-LDLCI6JG.js";import{a as i,b as t}from"./chunk-QEZ3K4DX.js";var c="nickname",h=class r{_socketService=o(k);_sessionService=o(p);_roomService=o(v);_nickname=a(null);nickname=this._nickname.asReadonly();room=s(()=>this._roomService.room());playerContext=s(()=>({nickname:this.nickname(),room:this.room()?.name||null}));constructor(){this.initialize()}initialize(){l(()=>{this._roomService.setNickname(this.nickname())});let e=this._sessionService.getItem(c,null);e&&this._nickname.set(e)}setNickname(e){if(e){this._nickname.set(e),this._sessionService.setItem(c,e);return}this._nickname.set(null),this._sessionService.removeItem(c)}emitCreateRoom(e){this._socketService.emit("create-room",t(i({},this.playerContext()),{room:e}))}emitJoinRoom(e){this._socketService.emit("join-room",t(i({},this.playerContext()),{room:e}))}emitLeaveRoom(e){this._socketService.emit("leave-room",t(i({},this.playerContext()),{room:e}))}emitKickPlayer(e,n){let{nickname:u,socket:S}=n;this._socketService.emit("kick-player",{room:e,nickname:u,socketId:S.id})}emitStartGame(e){this._socketService.emit("start-game",t(i({},this.playerContext()),{room:e}))}emitGameFinished(e){this._socketService.emit("game-finish",t(i({},this.playerContext()),{room:e}))}static \u0275fac=function(n){return new(n||r)};static \u0275prov=m({token:r,factory:r.\u0275fac,providedIn:"root"})};export{h as a};
