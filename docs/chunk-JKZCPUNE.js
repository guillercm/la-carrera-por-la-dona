import{a as D,b as M,c as V,e as N}from"./chunk-7EIVJ7KP.js";import{a as T}from"./chunk-CBHILWM2.js";import{C as P,d as s}from"./chunk-UDSADNSR.js";import{Ab as j,F as v,Ha as i,Ia as l,Ja as h,La as F,M as c,Na as R,Q as C,R as _,Xa as w,Ya as x,d,g as u,ga as a,gb as E,ib as G,j as f,oa as y,sa as S,v as b,x as g,za as m}from"./chunk-E45LWGWT.js";import"./chunk-QEZ3K4DX.js";var J=o=>({afterFormTemplate:o});function L(o,r){if(o&1&&(i(0,"div",6),h(1,"lib-grcm-button",7)(2,"lib-grcm-button",8),l()),o&2){let e=r.form;a(),m("disabled",e.invalid)("outline",!0),a(),m("disabled",e.invalid)("outline",!0)}}var p=class o{_playerContext=c(T);_roomService=c(P);dataForm={form:{id:"select-room"},controls:{room:{component:N,formFieldComponent:V,value:"",validators:[s.required,s.minLength(6),s.maxLength(10)],args:{control:{placeholder:"sala"},formField:{label:"Sala"}},classes:{control:"input-group"}}}};submit(r){let e=r.submitter,n=r?.form?.value?.room||null;if(e==="create-room"){this._playerContext.emitCreateRoom(n);return}this._roomService.canJoinRoom(n).pipe(g(1),v(t=>{if(t){this._roomService.openErrorModal("join-room",t);return}this._playerContext.emitJoinRoom(n)}),b(t=>t.status===j.NotFound?(this._roomService.openErrorModal("join-room","Esa sala no existe"),u([null],d)):f(()=>t))).subscribe()}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=y({type:o,selectors:[["simpsons-select-room-page"]],decls:8,vars:4,consts:[["afterFormTemplate",""],[1,"d-flex","justify-content-center","align-items-center","w-100","h-100"],[1,"card","shadow-sm"],[1,"card-body"],[1,"card-title","text-center","mb-3"],[2,"width","50%",3,"formSubmit","data","templates"],[1,"d-flex","justify-content-between","mt-2"],["type","submit","variant","secondary","label","Crear sala","submitter","create-room",1,"w-50","me-2",3,"disabled","outline"],["type","submit","variant","primary","label","Unirse a la sala","submitter","join-room",1,"w-50","ms-2",3,"disabled","outline"]],template:function(e,n){if(e&1){let t=F();i(0,"div",1)(1,"div",2)(2,"div",3)(3,"h5",4),x(4,"Unete o crea una sala para empezar a jugar"),l(),i(5,"lib-grcm-form",5),R("formSubmit",function(I){return C(t),_(n.submit(I))}),S(6,L,3,4,"ng-template",null,0,G),l()()()()}if(e&2){let t=w(7);a(5),m("data",n.dataForm)("templates",E(2,J,t))}},dependencies:[M,D],encapsulation:2})};export{p as default};
