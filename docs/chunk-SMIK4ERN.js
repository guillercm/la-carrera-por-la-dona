import{a as I,b as ue,c as fe,d as _e,e as Ce,f as ge,g as he,h as be,i as Fe,j as ve,k as ye,l as j}from"./chunk-AMFU7SSY.js";import{$a as g,Aa as oe,Ca as u,Ea as ie,Eb as pe,Fa as re,Ga as ae,Ha as _,I as X,Ia as b,Ja as O,Ka as C,La as $,M as p,Na as N,Oa as l,Q as k,R as q,U as Y,V as S,Va as w,Wa as R,Xa as le,Y as ee,Ya as M,Z as y,Za as P,_ as i,_a as se,aa as te,ab as F,b as J,ba as T,bb as v,cb as ce,fb as me,ga as a,jb as m,ka as f,la as V,ma as ne,oa as x,ob as z,qb as de,rb as L,sa as c,w as Z,ya as D,z as W,za as d}from"./chunk-LDLCI6JG.js";function Re(n,s){if(n&1&&O(0,"i",1),n&2){let e=l();d("ngClass","fs-"+e.fontSizeIcon()+" bi bi-"+e.icon())}}var Le=["container"];function Ge(n,s){n&1&&C(0)}function Se(n,s){if(n&1&&c(0,Ge,1,0,"ng-container",2),n&2){let e=l().$implicit,t=v(0),o=l();d("ngTemplateOutlet",t)("ngTemplateOutletContext",o.getDataForTemplateContext(e))}}function Ve(n,s){if(n&1&&(g(0),c(1,Se,1,2,"ng-container")),n&2){let e=s.$implicit,t=F(l().templates()[e]);a(),u(t?1:-1)}}function Oe(n,s){n&1&&C(0)}function Ie(n,s){if(n&1&&c(0,Oe,1,0,"ng-container",2),n&2){l();let e=v(1),t=l();d("ngTemplateOutlet",e)("ngTemplateOutletContext",t.getDataForTemplateContext())}}function Ee(n,s){n&1&&C(0)}function ke(n,s){if(n&1&&c(0,Ee,1,0,"ng-container",2),n&2){let e=l().$implicit,t=v(0),o=l(2);d("ngTemplateOutlet",t)("ngTemplateOutletContext",o.getDataForTemplateContext(e))}}function qe(n,s){n&1&&C(0)}function De(n,s){if(n&1&&c(0,qe,1,0,"ng-container",2),n&2){let e=l().$implicit,t=v(3),o=l(2);d("ngTemplateOutlet",t)("ngTemplateOutletContext",o.getDataForTemplateContext(e))}}function Ne(n,s){if(n&1&&(g(0),c(1,ke,1,2,"ng-container"),O(2,"lib-grcm-control",4),g(3),c(4,De,1,2,"ng-container")),n&2){let e=s.$implicit,t=l(2),o=F(t.templates()["before_"+e]);a(),u(o?1:-1),a(),d("formControlName",e),a();let r=F(t.templates()["after_"+e]);a(),u(r?4:-1)}}function Me(n,s){n&1&&C(0)}function ze(n,s){if(n&1&&c(0,Me,1,0,"ng-container",2),n&2){l();let e=v(5),t=l();d("ngTemplateOutlet",e)("ngTemplateOutletContext",t.getDataForTemplateContext())}}function je(n,s){if(n&1){let e=$();_(0,"form",3),N("ngSubmit",function(o){k(e);let r=l();return q(r.onSubmit(o))}),g(1),c(2,Ie,1,2,"ng-container"),re(3,Ne,5,5,null,null,ie),g(5),c(6,ze,1,2,"ng-container"),b()}if(n&2){let e=l(),t=v(2);d("formGroup",t)("ngClass",e.additionalClasses()),a();let o=F(e.templates().beforeFormTemplate);a(),u(o?2:-1),a(),ae(e.formControlNames()),a(2);let r=F(e.templates().afterFormTemplate);a(),u(r?6:-1)}}var xe=["controlView"];function Be(n,s){if(n&1&&(_(0,"p"),M(1),b(),O(2,"p")),n&2){let e=l(),t=v(0);a(),P(e.getError(t))}}var Qe=["input"];function Ae(n,s){if(n&1&&(_(0,"span",1),O(1,"i",3),b()),n&2){let e=l(2);a(),d("ngClass","bi bi-"+e.icon())}}function $e(n,s){if(n&1){let e=$();c(0,Ae,2,1,"span",1),g(1)(2)(3)(4),_(5,"input",2,0),N("input",function(){k(e);let o=le(6),r=l();return q(r.change(o.value))})("blur",function(){k(e);let o=l();return q(o.onBlur())}),b()}if(n&2){let e=l();u(e.icon()?0:-1);let t=e.control().validator,o=e.control().valid,r=e.control().invalid,h=e.control().touched;a(5),oe("is-valid",t&&o&&h)("is-invalid",t&&r&&h),d("type",e.type())("placeholder",e.placeholder())("value",e.value())("id",e.id())("ngClass",e.additionalClasses()),D("disabled",e.disabled()?"disabled":null)("autocomplete",e.autocomplete()?"on":"off")}}var ct=(()=>{class n{label=i("");title=i("");disabled=i(!1);link=i(null);type=i("button");variant=i("primary");outline=i(!1);size=i("default");additionalClasses=i("");icon=i("");submitter=i(null);fontSizeIcon=i(6);clicked=y();classes=m(()=>`w-100 btn btn-${(this.outline()?"outline-":"")+this.variant()+(this.size()?` btn-${this.size()} `:" ")+this.additionalClasses()}`);click(){this.clicked.emit()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=x({type:n,selectors:[["lib-grcm-button"]],inputs:{label:[1,"label"],title:[1,"title"],disabled:[1,"disabled"],link:[1,"link"],type:[1,"type"],variant:[1,"variant"],outline:[1,"outline"],size:[1,"size"],additionalClasses:[1,"additionalClasses"],icon:[1,"icon"],submitter:[1,"submitter"],fontSizeIcon:[1,"fontSizeIcon"]},outputs:{clicked:"clicked"},decls:3,vars:8,consts:[[3,"click","type","title","ngClass","routerLink"],[3,"ngClass"]],template:function(t,o){t&1&&(_(0,"button",0),N("click",function(){return o.click()}),c(1,Re,1,1,"i",1),M(2),b()),t&2&&(d("type",o.type())("title",o.title())("ngClass",o.classes())("routerLink",o.link()),D("disabled",o.disabled()?"disabled":null)("data-submitter",o.submitter()?o.submitter():null),a(),u(o.icon()?1:-1),a(),se(" ",o.label(),`
`))},dependencies:[L,z,pe],encapsulation:2})}return n})();var B=(()=>{class n{_injector=p(Y);_destroyRef=p(S);_container=V("container",{read:f});_grcmFormComponent=p(U);formControlName=i.required();_componentRef;_componentRefFormField;_componentInstance=m(()=>this._componentRef?.instance);id=m(()=>this._grcmFormComponent.identifier()+"_"+this.formControlName());_form=m(()=>this._grcmFormComponent.form());_data=m(()=>this._grcmFormComponent.data().controls[this.formControlName()]);control=m(()=>this._form()?.controls[this.formControlName()]);ngOnInit(){this.initialize()}initialize(){this.createComponents(),this.setInputsOutputs(),this.setClasses()}createComponents(){let{component:e,formFieldComponent:t}=this._data(),o=this._container();if(!t||!o)return;this._componentRefFormField=o.createComponent(t),this._componentRefFormField.setInput("control",this.control()),this._componentRefFormField.setInput("id",this.id());let r=this._componentRefFormField.instance;this._componentRef=r.controlView().createComponent(e)}setInputsOutputs(){let e=this._data().args;if(!e)return;let{control:t={},formField:o={}}=e,r=this._componentRef,h=this._componentRefFormField,K=(H,Q)=>{Object.keys(H).forEach(E=>{let G=H[E],A=Q.instance[E];switch(typeof A){case"function":if(te(G)){let we=ue(G,{injector:this._injector}).subscribe(()=>Q.setInput(E,G()));this._destroyRef.onDestroy(()=>we.unsubscribe())}else Q.setInput(E,G);break;case"object":if(!(A instanceof ee))return;let Te=A.subscribe(G);this._destroyRef.onDestroy(()=>Te.unsubscribe())}})};K(t,r),K(o,h)}setClasses(){let e=this._data().classes;if(!e)return;let{control:t,formField:o}=e;t&&(this._componentRef.location.nativeElement.classList=t),o&&(this._componentRefFormField.location.nativeElement.classList=o)}writeValue(e){this._componentInstance().writeValue(e)}registerOnChange(e){this._componentInstance().registerOnChange(e)}registerOnTouched(e){this._componentInstance().registerOnTouched(e)}setDisabledState(e){this._componentInstance()?.setDisabledState?.(e)}ngOnDestroy(){this._componentRef.destroy(),this._componentRefFormField.destroy(),this._container()?.clear()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=x({type:n,selectors:[["lib-grcm-control"]],viewQuery:function(t,o){t&1&&w(o._container,Le,5,f),t&2&&R()},hostVars:1,hostBindings:function(t,o){t&2&&D("data-control-id",o.id())},inputs:{formControlName:[1,"formControlName"]},features:[ce([{provide:fe,useExisting:X(()=>n),multi:!0}])],decls:2,vars:0,consts:[["container",""]],template:function(t,o){t&1&&C(0,null,0)},dependencies:[L,j],encapsulation:2})}return n})(),U=(()=>{class n{grcmControls=ne(B,{read:f});_destroyRef=p(S);_formBuilder=p(ve);data=i.required();additionalClasses=m(()=>this.data().form.classes||"");buildForm=y();formSubmit=y();formChange=y();_form=T(null);form=this._form.asReadonly();formKeys=[];templates=i({});identifier=m(()=>this.data().form.id);formControlNames=m(()=>Object.keys(this._form()?.controls||{}));ngOnInit(){this.initialize()}ngAfterViewInit(){this.buildForm.emit(this.form())}initialize(){this.initForm(),this.initSubscriptionsForControlValueChanges()}initForm(){let e=this.data();this._form.set(this._formBuilder.record({},{validators:e.form.validators,asyncValidators:e.form.asyncValidators,updateOn:e.form.updateOn||"change"})),Object.keys(e.controls).forEach(t=>{let o=e.controls[t];this.addControl(t,o)})}addControl(e,t){this._form()?.addControl(e,this._formBuilder.control(t.value,[...t.validators||[]],[...t.asyncValidators||[]]))}initSubscriptionsForControlValueChanges(){let e=this.form();e&&this.formControlNames().forEach(t=>{this.data().controls[t].valueChangesSubscribe&&e.controls[t].valueChanges.pipe(W(),I(this._destroyRef)).subscribe(o=>{this.formChange.emit({field:t,newValue:o})})})}getErrors(e){return e?Object.keys(e):[]}onSubmit(e=null){let t=e?.submitter?.dataset.submitter||null,o=this.form();this.markAsTouched(),!(!o||o.invalid)&&o.valid&&this.formSubmit.emit({form:o,submitter:t})}markAsTouched(){let e=this.form();e?.markAsTouched(),e?.updateValueAndValidity()}getDataForTemplateContext(e=null){let t=this.form();if(!t)return{};let o={form:t};return e&&(o.control=t.controls[e]),o}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=x({type:n,selectors:[["lib-grcm-form"]],viewQuery:function(t,o){t&1&&w(o.grcmControls,B,5,f),t&2&&R()},inputs:{data:[1,"data"],templates:[1,"templates"]},outputs:{buildForm:"buildForm",formSubmit:"formSubmit",formChange:"formChange"},decls:4,vars:2,consts:[["renderTemplate",""],["novalidate","",3,"formGroup","ngClass"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["novalidate","",3,"ngSubmit","formGroup","ngClass"],[2,"width","100%",3,"formControlName"]],template:function(t,o){if(t&1&&(c(0,Ve,2,2,"ng-template",null,0,me),g(2),c(3,je,7,6,"form",1)),t&2){a(2);let r=F(o.form());a(),u(r?3:-1)}},dependencies:[L,z,de,j,he,Ce,ge,be,Fe,B],encapsulation:2})}return n})(),mt=(()=>{class n{_destroyRef=p(S);controlView=V.required("controlView",{read:f});control=i.required();id=i.required();_formComponent=p(U);label=i("");_isRequired=T(!1);isRequired=this._isRequired.asReadonly();_useCompleteLabel=T(!1);useCompleteLabel=this._useCompleteLabel.asReadonly();requiredTag="*";optionalTag="(Opcional)";form=m(()=>this._formComponent.form());completeLabel=m(()=>this.label()+(this.useCompleteLabel()?this.isRequired()?this.requiredTag:this.optionalTag:""));ngOnInit(){this.initialize()}initialize(){this.setIsRequired(),this.initControlStatusChanges(),this.initFormStatusChanges()}initControlStatusChanges(){this.control().statusChanges.pipe(I(this._destroyRef)).subscribe(()=>{this.setIsRequired()})}initFormStatusChanges(){let e=this._formComponent.form();e&&(this.setUseCompleteLabel(e),e.statusChanges.pipe(I(this._destroyRef)).subscribe(()=>{this.setUseCompleteLabel(e)}))}setUseCompleteLabel(e){let t=0,o=Object.keys(e.controls);o.forEach(h=>{this.controlIsRequired(e.controls[h])&&t++});let r=o.length/2;this.isRequired()&&t<=r?this._useCompleteLabel.set(!0):this._useCompleteLabel.set(!this.isRequired()&&t>r)}setIsRequired(){this._isRequired.set(this.controlIsRequired(this.control()))}controlIsRequired(e){return e.hasValidator(_e.required)}getError(e){let t=Object.keys(e);if(!t.length)return"";let o=t[0],r=e[t[0]];switch(o){case"required":return"Este campo es requerido.";case"minlength":return`Tiene que tener como m\xEDnimo ${r.requiredLength} caracteres.`;case"maxlength":return`Tiene que tener como m\xE1ximo ${r.requiredLength} caracteres.`;case"pattern":return"La contrase\xF1a debe contener al menos una letra may\xFAscula, una min\xFAscula y un s\xEDmbolo especial.";default:return"Revisa el valor ingresado."}}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=x({type:n,selectors:[["lib-grcm-form-field"]],viewQuery:function(t,o){t&1&&w(o.controlView,xe,5,f),t&2&&R()},hostAttrs:[1,"form-group"],inputs:{control:[1,"control"],id:[1,"id"],label:[1,"label"]},decls:9,vars:4,consts:[["controlView",""],[1,"form-label",3,"for"],[1,"input-group","has-validation","form-field-invalid","d-block"],[1,"invalid-feedback","d-block"]],template:function(t,o){if(t&1&&(g(0)(1),_(2,"label",1),M(3),b(),_(4,"div",2),C(5,null,0),_(7,"div",3),c(8,Be,3,1),b()()),t&2){let r=F(o.control().errors),h=o.control().touched;a(2),d("for",o.id()),a(),P(o.completeLabel()),a(5),u(h&&r?8:-1)}},dependencies:[L],styles:["[_nghost-%COMP%]{margin:0;padding:0;width:100%}"],changeDetection:0})}return n})(),dt=(()=>{class n{controlView=V.required("controlView",{read:f});control=i.required();id=i.required();static \u0275fac=function(t){return new(t||n)};static \u0275cmp=x({type:n,selectors:[["lib-grcm-plain-form-field"]],viewQuery:function(t,o){t&1&&w(o.controlView,xe,5,f),t&2&&R()},inputs:{control:[1,"control"],id:[1,"id"]},decls:2,vars:0,consts:[["controlView",""]],template:function(t,o){t&1&&C(0,null,0)},styles:["[_nghost-%COMP%]{margin:0;padding:0;width:100%}"]})}return n})(),pt=(()=>{class n{_grcmFormComponent=p(U);controlComp=p(B);_destroyRef=p(S);type=i("text");placeholder=i("");debounceTimer=i(300);icon=i();autocomplete=i(!0);submitFormOnDebounce=i(!1);changeValue=y();debounce=y();additionalClasses=i("");control=m(()=>this.controlComp.control());id=m(()=>this.controlComp.id());_value=T("");value=this._value.asReadonly();_disabled=T(!1);disabled=this._disabled.asReadonly();_debouncer=new J;_inputRef=V("input");ngOnInit(){this.initialize()}initialize(){this._debouncer.pipe(I(this._destroyRef),Z(this.debounceTimer())).subscribe(e=>{this.debounce.emit(e),this.submitFormOnDebounce()&&this._grcmFormComponent.onSubmit()})}change(e){this._onTouched(),this._onChange(e)}onBlur(){this._onTouched()}_onChange=()=>{};_onTouched=()=>{};registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}writeValue(e){typeof e=="string"&&this.updateValue(e)}updateValue(e){this._value.set(e);let t=this._inputRef();t&&(t.nativeElement.value=e)}setDisabledState(e){this._disabled.set(e)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=x({type:n,selectors:[["lib-grcm-input"]],viewQuery:function(t,o){t&1&&w(o._inputRef,Qe,5),t&2&&R()},inputs:{type:[1,"type"],placeholder:[1,"placeholder"],debounceTimer:[1,"debounceTimer"],icon:[1,"icon"],autocomplete:[1,"autocomplete"],submitFormOnDebounce:[1,"submitFormOnDebounce"],additionalClasses:[1,"additionalClasses"]},outputs:{changeValue:"changeValue",debounce:"debounce"},decls:1,vars:1,consts:[["input",""],[1,"input-group-text"],[1,"form-control",3,"input","blur","type","placeholder","value","id","ngClass"],[3,"ngClass"]],template:function(t,o){t&1&&c(0,$e,7,12),t&2&&u(o.control()?0:-1)},dependencies:[L,z,j,ye],encapsulation:2})}return n})();export{ct as a,U as b,mt as c,dt as d,pt as e};
