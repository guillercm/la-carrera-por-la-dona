import{a as B}from"./chunk-GHDJ2MDG.js";import{a as F}from"./chunk-HGWWCJE7.js";import{C as D}from"./chunk-ADJFLGFW.js";import{Ca as _,Da as E,F as w,Fa as T,Ga as R,Ha as o,Ia as r,Ja as g,La as v,M as x,Na as u,Oa as m,Q as d,R as s,Ya as c,Za as C,_a as h,cb as G,db as I,eb as P,ga as n,mb as b,nb as V,oa as L,sa as f,ub as j,x as k,za as p}from"./chunk-GYMYWFR2.js";import"./chunk-QEZ3K4DX.js";function $(t,i){t&1&&g(0,"i",15)}function M(t,i){if(t&1){let e=v();o(0,"lib-grcm-button",17),u("clicked",function(){d(e);let l=m().$implicit,y=m(2);return s(y.kickPlayer(l))}),r()}t&2&&p("outline",!0)}function N(t,i){if(t&1&&(o(0,"li",9)(1,"div",5)(2,"span",13),c(3),r()(),o(4,"div",5),g(5,"lib-grcm-button",14),f(6,$,1,0,"i",15)(7,M,1,1,"lib-grcm-button",16),r()()),t&2){let e=i.$implicit,a=m(2);n(3),C(e.nickname),n(3),_(a.showLeaderIcon(e)?6:-1),n(),_(a.showBtnPickPlayer(e)?7:-1)}}function z(t,i){if(t&1){let e=v();o(0,"div",1)(1,"div",3)(2,"h2",4),c(3),r(),o(4,"div",5)(5,"lib-grcm-button",6),u("clicked",function(){d(e);let l=m();return s(l.leaveRoom())}),r()()(),o(6,"div")(7,"h4",7),c(8),r(),o(9,"ul",8),T(10,N,8,3,"li",9,E),r()(),o(12,"div",10)(13,"lib-grcm-button",11),u("clicked",function(){d(e);let l=m(),y=P(1);return s(l.canStartGame(y.players)&&l.startGame())}),r(),o(14,"p",12),c(15),r()()()}if(t&2){let e=m(),a=P(1);n(3),h(" Sala: ",a.name," "),n(2),p("outline",!0),n(3),C(e.label()),n(2),R(a.players),n(3),p("disabled",!e.canStartGame(a.players)),n(2),h(" Solo el l\xEDder puede empezar la fiesta... y Homero no mueve un dedo hasta que haya al menos ",e.minPlayersToStart," jugadores. ")}}function A(t,i){t&1&&(o(0,"div",2),c(1," No se ha cargado ninguna sala. "),r())}var S=class t{_playerContext=x(F);_roomService=x(D);room=b(()=>this._roomService.room());nickname=b(()=>this._playerContext.nickname());minPlayersToStart=this._roomService.minPlayersToStart;label=b(()=>`Jugadores (${this.room()?.players.length}/${this._roomService.maxPlayersPerRoom})`);constructor(){V(()=>console.log(this.room()))}leaveRoom(){this._playerContext.emitLeaveRoom(this.room()?.name||"")}kickPlayer(i){this._playerContext.emitKickPlayer(this.room()?.name||"",i)}showLeaderIcon(i){return i.isLeader}showBtnPickPlayer(i){return this._roomService.iAmLeader()&&i.nickname!==this.nickname()}canStartGame(i){return this._roomService.iAmLeader()&&i.length>=this.minPlayersToStart}startGame(){this._roomService.updateGameStarted(this.room()?.name||"",!0).pipe(k(1),w(()=>this._playerContext.emitStartGame(this.room()?.name||""))).subscribe()}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=L({type:t,selectors:[["simpsons-lobby-page"]],decls:4,vars:2,consts:[[1,"container","my-5","d-flex","justify-content-center"],[1,"card","shadow-lg","rounded-4","p-4",2,"max-width","600px"],[1,"alert","alert-warning","text-center"],[1,"d-flex","justify-content-between","align-items-center","mb-4"],[1,"fw-bold","mb-0"],[1,"d-flex","align-items-center","gap-2"],["icon","door-closed","variant","danger",3,"clicked","outline"],[1,"mb-3","text-secondary"],[1,"list-group"],[1,"list-group-item","d-flex","justify-content-between","align-items-center"],[1,"mt-4"],["label","Empezar partida",3,"clicked","disabled"],[1,"text-muted","fst-italic","mt-2"],[1,"fw-semibold"],["icon","person-x-fill",1,"invisible"],["title","L\xEDder de la sala",1,"bi","bi-award-fill","text-warning"],["variant","danger","icon","person-x-fill",3,"outline"],["variant","danger","icon","person-x-fill",3,"clicked","outline"]],template:function(e,a){if(e&1&&(o(0,"div",0),G(1),f(2,z,16,5,"div",1)(3,A,2,0,"div",2),r()),e&2){n();let l=I(a.room());n(),_(l?2:3)}},dependencies:[j,B],encapsulation:2})};export{S as default};
